---
import Search from "astro-pagefind/components/Search"
---

<div
  id="backdrop"
  class="bg-[rgba(0, 0, 0, 0.5] invisible fixed left-0 top-0 z-50 flex h-screen w-full justify-center p-6 backdrop-blur-sm"
>
  <div
    id="pagefind-container"
    class="m-0 flex h-fit max-h-[80%] w-full max-w-screen-sm flex-col overflow-auto rounded border border-border bg-background p-2 px-4 py-3 text-foreground shadow-lg"
  >
    <Search
      id="search"
      className="pagefind-ui"
      uiOptions={{
        showImages: false,
        excerptLength: 15,
        resetStyles: false
      }}
    />
    <div class="mr-2 pb-1 pt-4 text-right text-xs dark:prose-invert">
      Press <span class="prose text-xs dark:prose-invert"
        ><kbd class="">Esc</kbd></span
      > or click anywhere to close
    </div>
  </div>
</div>

<script>
  import { setupPagefind } from "@lib/pagefind.js"

  // Setup Pagefind on initial load
  setupPagefind()

  // Re-setup Pagefind after each navigation
  document.addEventListener("astro:page-load", setupPagefind)
</script>
